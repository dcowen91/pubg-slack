{"version":3,"file":"CommandAdapter.js","sourceRoot":"","sources":["../../src/Models/CommandAdapter.ts"],"names":[],"mappings":";;AAEA,gDAA2C;AAE3C,6DAAsD;AAEtD;IAYC,YAAY,GAAY;QAVxB,iBAAY,GAAG;YACd,OAAO;YACP,KAAK;YACL,MAAM;YACN,OAAO;YACP,SAAS;SACT,CAAC;QAMD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IAChB,CAAC;IAED,cAAc,CAAC,WAAmB;QAEjC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,IAAI,CAAC,CAAC;IACxE,CAAC;IAED,aAAa,CAAC,QAAgB,EAAE,WAAmB;QAKlD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,WAAwB;YAC1E,MAAM,OAAO,GAAG,IAAI,4BAAkB,CAAC,WAAW,CAAC,CAAC;YACpD,MAAM,CAAC,CAAC,WAAW,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;gBACzC,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACzB,CAAC;wBACA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,MAAM,EAAG,mBAAQ,CAAC,YAAY,CAAC;8BAC/D,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,cAAc,CAAC;8BAC1C,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,IAAI,EAAE,mBAAQ,CAAC,QAAQ,CAAC;8BACnD,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,MAAM,EAAE,mBAAQ,CAAC,UAAU,CAAC,CAAC;oBAC3D,CAAC;gBACD,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACzB,CAAC;wBACA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,cAAc,CAAC,CAAC;oBACnD,CAAC;gBACD,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACzB,CAAC;wBACA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,IAAI,EAAE,mBAAQ,CAAC,QAAQ,CAAC,CAAC;oBAC5D,CAAC;gBACD,KAAK,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACzB,CAAC;wBACA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,mBAAQ,CAAC,MAAM,EAAE,mBAAQ,CAAC,UAAU,CAAC,CAAC;oBAChE,CAAC;gBACD;oBACC,KAAK,CAAC;YACR,CAAC;YACD,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,gBAAgB,GAAG,QAAQ,CAAC,CAAC;QACpD,CAAC,CAAC,CAAC;IACJ,CAAC;CACD;AAED,kBAAe,cAAc,CAAC","sourcesContent":["import {PubgAPI} from 'pubg-api-redis';\r\nimport {PlayerStats} from '../Interfaces/PlayerStats';\r\nimport {StatName} from '../Enums/StatName';\r\n// import {CommandName} from '../Enums/CommandName';\r\nimport PlayerStatsAdapter from './PlayerStatsAdapter';\r\n\r\nclass CommandAdapter\r\n{\r\n\tcommandNames = [\r\n\t\t'stats',\r\n\t\t'kdr',\r\n\t\t'wins',\r\n\t\t'top10',\r\n\t\t'adduser'\r\n\t];\r\n\r\n\tapi: PubgAPI;\r\n\r\n\tconstructor(api: PubgAPI)\r\n\t{\r\n\t\tthis.api = api;\r\n\t}\r\n\r\n\tisValidCommand(commandText: string): Boolean\r\n\t{\r\n\t\treturn this.commandNames.indexOf(commandText.toLocaleLowerCase()) >= 0;\r\n\t}\r\n\r\n\thandleCommand(userName: string, commandText: string): Promise<string>\r\n\t{\r\n\t\t// TODO add more cases\r\n\t\t// TODO add check if it is valid command\r\n\t\t// TODO refactor to support printing solostats or stats grouped by region\r\n\t\treturn this.api.profile.byNickname(userName).then((playerStats: PlayerStats) => {\r\n\t\t\tconst adapter = new PlayerStatsAdapter(playerStats);\r\n\t\t\tswitch (commandText.toLocaleLowerCase()) {\r\n\t\t\t\tcase this.commandNames[0]:\r\n\t\t\t\t{\r\n\t\t\t\t\treturn adapter.printStat(StatName.Rating,  StatName.RoundsPlayed)\r\n\t\t\t\t\t+ adapter.printStat(StatName.KillDeathRatio)\r\n\t\t\t\t\t+ adapter.printStat(StatName.Wins, StatName.WinRatio)\r\n\t\t\t\t\t+ adapter.printStat(StatName.Top10s, StatName.Top10Ratio);\r\n\t\t\t\t}\r\n\t\t\t\tcase this.commandNames[1]:\r\n\t\t\t\t{\r\n\t\t\t\t\treturn adapter.printStat(StatName.KillDeathRatio);\r\n\t\t\t\t}\r\n\t\t\t\tcase this.commandNames[2]:\r\n\t\t\t\t{\r\n\t\t\t\t\treturn adapter.printStat(StatName.Wins, StatName.WinRatio);\r\n\t\t\t\t}\r\n\t\t\t\tcase this.commandNames[3]:\r\n\t\t\t\t{\r\n\t\t\t\t\treturn adapter.printStat(StatName.Top10s, StatName.Top10Ratio);\r\n\t\t\t\t}\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn Promise.reject('not supported ' + userName);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default CommandAdapter;"]}