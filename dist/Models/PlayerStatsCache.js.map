{"version":3,"file":"PlayerStatsCache.js","sourceRoot":"","sources":["../../src/Models/PlayerStatsCache.ts"],"names":[],"mappings":";;AAGA;IAQC,YAAY,IAAY;QAEvB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC9B,CAAC;IAED,SAAS,CAAC,IAAY;QAErB,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,kBAAkB,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACxE,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAE,KAAK,CAAC,KAAqB,IAAI,CAAC,kBAAkB,CAAC,WAAW,EAAE,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CACpH,CAAC;YACA,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;QACD,IAAI;YAAC,MAAM,CAAC,EAA2B,CAAC;IACzC,CAAC;CACD;AAED,kBAAe,gBAAgB,CAAC","sourcesContent":["import {PlayerStatsCacheValue} from '../InterFaces/PlayerStatsCacheValue';\r\nimport {PlayerStats} from '../InterFaces/PlayerStats';\r\n\r\nclass PlayerStatsCache\r\n{\r\n\tprivate innerCache: {[userName: string]: PlayerStatsCacheValue};\r\n\tprivate invalidationTime;\r\n\r\n\t// Key {username: string}\r\n\t// Value {stats: PlayerStats, timeStamp: dateTime}\r\n\t// TODO: Make singleton?\r\n\tconstructor(time: number)\r\n\t{\r\n\t\tthis.innerCache = {};\r\n\t\tthis.invalidationTime = time;\r\n\t}\r\n\r\n\tgetPlayer(name: string): PlayerStatsCacheValue\r\n\t{\r\n\t\tconst value = this.innerCache[name];\r\n\t\tconst calculatedDateTime = new Date(Date.now() - this.invalidationTime);\r\n\t\tif (!!value && !!(value.stats as PlayerStats) && (calculatedDateTime.toUTCString()) < value.timeStamp.toUTCString())\r\n\t\t{\r\n\t\t\treturn this.innerCache[name];\r\n\t\t}\r\n\t\telse return {} as PlayerStatsCacheValue;\r\n\t}\r\n}\r\n\r\nexport default PlayerStatsCache;"]}