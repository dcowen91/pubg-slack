{"version":3,"file":"PlayerStatsCache.js","sourceRoot":"","sources":["../../src/Models/PlayerStatsCache.ts"],"names":[],"mappings":";;AAGA;IAOC;QAFQ,qBAAgB,GAAG,MAAM,CAAC;QAIjC,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;IACtB,CAAC;IAED,SAAS,CAAC,IAAY;QAErB,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACpC,MAAM,kBAAkB,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC;QACxE,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,CAAE,KAAK,CAAC,KAAqB,IAAI,CAAC,kBAAkB,CAAC,GAAG,KAAK,CAAC,SAAS,CAAC,CACxF,CAAC;YACA,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;QACD,MAAM,CAAC,EAA2B,CAAC;IACpC,CAAC;IAED,SAAS,CAAC,QAAgB,EAAE,KAAkB;QAE7C,MAAM,SAAS,GAAS,IAAI,IAAI,EAAE,CAAC;QACnC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,EAAC,KAAK,EAAE,SAAS,EAAC,CAAC;IAChD,CAAC;CACD;AAED,kBAAe,gBAAgB,CAAC","sourcesContent":["import {PlayerStatsCacheValue} from '../InterFaces/PlayerStatsCacheValue';\r\nimport {PlayerStats} from '../InterFaces/PlayerStats';\r\n\r\nclass PlayerStatsCache\r\n{\r\n\tprivate innerCache: {[userName: string]: PlayerStatsCacheValue};\r\n\r\n\t// 5 minutes in milliseconds\r\n\tprivate invalidationTime = 300000;\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis.innerCache = {};\r\n\t}\r\n\r\n\tgetPlayer(name: string): PlayerStatsCacheValue\r\n\t{\r\n\t\tconst value = this.innerCache[name];\r\n\t\tconst calculatedDateTime = new Date(Date.now() - this.invalidationTime);\r\n\t\tif (!!value && !!(value.stats as PlayerStats) && (calculatedDateTime) < value.timeStamp)\r\n\t\t{\r\n\t\t\treturn this.innerCache[name];\r\n\t\t}\r\n\t\treturn {} as PlayerStatsCacheValue;\r\n\t}\r\n\r\n\taddPlayer(userName: string, stats: PlayerStats)\r\n\t{\r\n\t\tconst timeStamp: Date = new Date();\r\n\t\tthis.innerCache[userName] = {stats, timeStamp};\r\n\t}\r\n}\r\n\r\nexport default PlayerStatsCache;"]}